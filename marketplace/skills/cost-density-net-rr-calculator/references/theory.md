# Market Microstructure Theory Background

<overview>
成本密度模型建立在市場微結構理論之上，特別是關於交易成本如何影響策略期望值的研究。本文件提供理論背景與文獻脈絡。
</overview>

<literature_foundations>
**1. Kyle (1985): Continuous Auctions and Insider Trading**

Kyle 的模型揭示了信息交易者如何影響價格：
- 做市商面臨逆向選擇風險
- 價格影響與交易量成正比
- 大單分拆可降低信息洩露

與成本密度模型的關聯：
- 點差反映做市商的逆向選擇補償
- 高頻交易者面臨更大的點差成本比例

**2. Glosten & Milgrom (1985): Bid-Ask Spread Model**

解釋點差存在的原因：
- 知情交易者與不知情交易者的分離均衡
- 點差是做市商對信息不對稱的保護

關鍵洞察：
```
點差 = 逆向選擇成本 + 存貨成本 + 訂單處理成本
```

成本密度模型將這些成本整合為單一指標。

**3. Easley & O'Hara (1987): Price, Trade Size, and Information**

研究交易規模與信息流的關係：
- 大單被視為包含更多信息
- 小單可能更頻繁但信息含量低
- 每單成本比例在小單時更高

這解釋了為何微型時間框架面臨「剪刀效應」。

**4. O'Hara (1995): Market Microstructure Theory**

系統性整理微結構理論：
- 價格發現機制
- 流動性與執行成本
- 市場設計對成本的影響

**5. Biais, Glosten & Spatt (2005): Survey**

現代微結構實證研究綜述：
- 電子化降低了固定成本
- 但相對成本（作為 % 的）仍然顯著
- 高頻策略面臨的微結構挑戰
</literature_foundations>

<hyperbolic_decay_intuition>
**雙曲線衰減的直觀理解**

為什麼成本與停損是反比關係？

**1. 固定成本被較小的利潤稀釋**

設每手固定成本為 C，預期利潤為 Profit：
- 大停損：Profit 大，C/Profit 小
- 小停損：Profit 小，C/Profit 大

比例關係是 1/P，這就是雙曲線。

**2. 部位規模放大效應**

固定風險下，小停損需要更大部位：
```
Lot = R / (P × V)
```

更大部位 = 更多佣金（佣金通常按手計）。

**3. 頻率效應**

小停損策略通常交易更頻繁：
- 更多交易 = 更多成本累積
- 成本在時間維度上也是非線性的
</hyperbolic_decay_intuition>

<scissors_effect>
**剪刀效應 (Scissors Effect)**

微型時間框架策略同時面臨兩個惡化因素：

**上刀片：成本負擔增加**
- 停損縮小 → x 增加 → RR_net 下降
- 數學上無法規避

**下刀片：訊號品質下降**
- 短週期噪音比例更高
- 預測準確度下降
- 實際勝率更難達到 WR_min

兩個因素相向而行，形成「剪刀」：

```
        成本負擔 ↗
                   ╲
                    ╲  獲利空間被壓縮
                     ╲
                      ╲
        訊號品質 ↘ ════╳════ → 時間框架縮短
```

這是微型時間框架策略難以獲利的根本原因。
</scissors_effect>

<event_horizon_concept>
**事件視界概念**

借用黑洞物理學的比喻：

**黑洞事件視界**
- 光速在此處無法逃逸
- 一旦越過，必然被吸入奇點

**獲利事件視界**
- 當 P < CostDensity 時，x > 1
- RR_net = (RR_g - x) / (1 + x) 變為負值
- 無論交易技術多好，期望值都是負的

```
P_critical 是「警戒線」（效率減半）
P = CostDensity 是「事件視界」（RR_net = 0 的極限）
P < CostDensity 是「黑洞內部」（必輸區）
```

這不是心理或技術問題，而是數學結構決定的。
</event_horizon_concept>

<practical_implications>
**實務啟示**

**1. 回測校正**

傳統回測使用 RR_g 計算期望值：
```
E_naive = WR × RR_g - (1 - WR)
```

正確做法是使用 RR_net：
```
E_correct = WR × RR_net - (1 - WR) × (1 + C_ratio)
```

差異在短時間框架可達 20-40%。

**2. 經紀商選擇**

成本密度 = c/V + s

降低成本密度的方法：
- 選擇低佣金經紀商（降低 c）
- 選擇低點差經紀商（降低 s）
- 交易高 V 商品（如期貨 vs CFD）

**3. 策略設計原則**

- 設定最小可行停損 > P_critical × 1.5
- 優先選擇高 RR_g 策略（降低 WR 需求）
- 避免過度優化到極短時間框架

**4. 風險管理**

- 監控實際滑點（模型假設理想執行）
- 流動性差時成本密度會增加
- 新聞事件時點差擴大
</practical_implications>

<model_limitations>
**模型限制**

**1. 假設理想執行**
- 無滑點
- 無部分成交
- 無市場影響

**2. 不包含持倉成本**
- 隔夜利息 (swap)
- 借券成本
- 資金成本

**3. 靜態點差假設**
- 實際點差會變動
- 流動性事件時點差擴大
- 夜盤點差通常較高

**4. 單一交易分析**
- 不考慮策略組合效應
- 不考慮相關性對沖

儘管有這些限制，模型在流動性良好的市場（如 XAU/USD、主要貨幣對）仍然是有效的「現實檢查」工具。
</model_limitations>
