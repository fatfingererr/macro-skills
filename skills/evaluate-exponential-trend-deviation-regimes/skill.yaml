displayName: 評估行情與指數趨勢偏離程度
emoji: "\U0001F4C8"
authorUrl: https://github.com/fatfingererr/macro-skills

tools:
  - claude-code

featured: false
installCount: 0

testQuestions:
  - question: '黃金目前的指數趨勢偏離度是多少？是否已超過 2011 年峰值？'
    expectedResult: |
      黃金（GC=F）指數趨勢偏離度分析結果（數據截至 2026-01-14）

      ┌─────────────────────────────┬────────┬─────────────────────────────┐
      │            指標             │  數值  │            狀態             │
      ├─────────────────────────────┼────────┼─────────────────────────────┤
      │ 當前偏離度                  │ 92.4%  │ 高於 2011 峰值（85.1%）     │
      ├─────────────────────────────┼────────┼─────────────────────────────┤
      │ 歷史分位數                  │ 97.8%  │ 極端區間                    │
      ├─────────────────────────────┼────────┼─────────────────────────────┤
      │ 與 1980 峰值差距            │ 228.3  │ 點（1980 峰值: 320.7%）     │
      └─────────────────────────────┴────────┴─────────────────────────────┘

      行情體質判定：1970s-like

      驅動因子：
      - 實質利率為負 / 下降中
      - 通膨風險上升
      - 地緣政治緊張度上升

      洞察
      - 黃金正在以極端正偏離交易，已超過 2011 年的偏離峰值
      - 與 1980 式的 blow-off 相比，偏離度仍明顯較低，若 1970s-like 條件持續，有延伸空間
      - 若實質利率重新錨定走高且通膨預期冷卻，均值回歸風險增加

  - question: '分析 S&P 500 的指數趨勢偏離度'
    expectedResult: |
      S&P 500（^GSPC）指數趨勢偏離度分析結果

      ┌─────────────────────────────┬────────┬─────────────────────────────┐
      │            指標             │  數值  │            狀態             │
      ├─────────────────────────────┼────────┼─────────────────────────────┤
      │ 當前偏離度                  │ +25.3% │ 正偏離                      │
      ├─────────────────────────────┼────────┼─────────────────────────────┤
      │ 歷史分位數                  │ 72.5%  │ 偏高區間                    │
      ├─────────────────────────────┼────────┼─────────────────────────────┤
      │ 歷史峰值偏離（自動識別）    │ +85.2% │ 2000-03 科技泡沫            │
      └─────────────────────────────┴────────┴─────────────────────────────┘

      洞察
      - 當前價格高於指數趨勢線約 25%
      - 處於歷史 72.5 分位數，偏高但非極端
      - 與 2000 年科技泡沫峰值相比仍有距離

qualityScore:
  overall: 75
  badge: 白銀
  metrics:
    architecture: 80
    maintainability: 75
    content: 85
    community: 20
    security: 95
    compliance: 80
  details: |
    **架構（80/100）**
    - 清晰的指數趨勢擬合方法論
    - 歷史對照機制完整
    - 宏觀因子整合設計合理

    **可維護性（75/100）**
    - 參數定義完整
    - 多數據來源支援
    - 工作流程分離

    **內容（85/100）**
    - 1970s vs 2000s 行情體質分類有理論依據
    - 歷史峰值對照（2011/1980）有實際意義
    - 宏觀代理指標選擇合理

    **社區（20/100）**
    - 新技能，尚無社區貢獻

    **安全（95/100）**
    - 僅讀取公開價格數據
    - 無需 API key

    **規範符合性（80/100）**
    - 遵循 Claude Code 規範
    - 完整的文件結構

bestPractices:
  - title: 使用足夠長的歷史數據
    description: 建議至少 10-20 年歷史數據，以捕捉完整的週期。不同資產需要不同的起始日期
  - title: 月頻數據降低噪音
    description: 長期趨勢分析建議使用月頻數據，日頻噪音太大。腳本會自動轉換
  - title: 不預設歷史峰值
    description: 讓系統自動識別歷史極端值，或由使用者根據資產特性指定有意義的參考日期
  - title: 理解偏離度的含義
    description: 偏離度是風險評估工具，不是交易訊號。高偏離可能持續很久，也可能快速回歸

pitfalls:
  - title: 把偏離度當作交易訊號
    description: 偏離度是風險評估工具，不是做多做空訊號
    consequence: 過早逆勢操作可能遭遇趨勢延續的虧損
  - title: 使用固定的歷史參考點
    description: 不同資產有不同的週期特性，不應套用其他資產的歷史峰值
    consequence: 參考點失去意義，誤導決策
  - title: 趨勢線擬合區間選擇不當
    description: 若只用近期數據擬合，趨勢斜率會被近期行情扭曲
    consequence: 偏離度計算失真
  - title: 忽略結構性變化
    description: 資產的長期成長率可能因市場結構、制度變化而改變
    consequence: 簡單的全樣本擬合可能不適用於有結構性轉折的資產

faq:
  - question: 什麼是「指數趨勢偏離度」？
    answer: |
      指數趨勢偏離度衡量當前價格與長期指數成長趨勢線的距離，以百分比表示。

      計算方式：
      1. 對歷史價格取對數：y = log(price)
      2. 對時間做線性回歸：y = a + b*t
      3. 趨勢價格：trend = exp(a + b*t)
      4. 偏離度：(price / trend - 1) × 100%

      正偏離表示價格高於趨勢，負偏離表示低於趨勢。

  - question: 這個工具適用於哪些資產？
    answer: |
      適用於具有長期指數成長特性的資產：

      **商品**：黃金、白銀、原油、銅等
      **股票指數**：S&P 500、納斯達克、全球指數等
      **加密貨幣**：比特幣、以太坊等（需注意歷史較短）
      **ETF**：各類 ETF
      **房地產指數**：房價指數、REIT 等

      核心要求：有足夠長的歷史數據（建議 ≥ 10 年）

  - question: 如何選擇歷史參考日期？
    answer: |
      有兩種方式：

      **1. 自動識別**（推薦）：
      - 讓系統自動找出歷史最大偏離度
      - 不需要預先知道資產的歷史

      **2. 手動指定**：
      - 根據資產特性指定有意義的歷史峰值/谷值
      - 例如：黃金可參考 1980、2011；股市可參考 2000、2008、2020

      **黃金範例**：`--compare-peaks "2011-09-06,1980-01-21"`
      **股市範例**：`--compare-peaks "2000-03-24,2007-10-09,2020-02-19"`

  - question: 宏觀因子分析支援哪些資產？
    answer: |
      目前宏觀因子分析主要針對黃金設計（1970s-like vs 2000s-like 體質）。

      其他資產的宏觀分析需要自定義因子和判定規則。

      若不使用 `--include-macro` 參數，工具會純粹計算偏離度，
      適用於所有資產。

about:
  repository: https://github.com/fatfingererr/macro-skills
  branch: main
  additionalInfo: |
    ## 參考來源

    - 靈感來自 Twitter/X 上關於「% distance from exponential growth trendline」的討論
    - 適用於多種資產類別的指數趨勢偏離度分析

    ## 數據來源

    **Yahoo Finance（免費，無需 API key）**
    - 支援：股票、期貨、ETF、指數、加密貨幣等
    - 使用 yfinance 套件抓取

    **FRED（免費，無需 API key，選用）**
    - 宏觀因子：實質利率、通膨預期、美元指數等
    - 使用 pandas-datareader 套件抓取

    **Stooq（替代來源）**
    - 各類資產歷史數據
    - CSV 下載

    ## 適用場景

    - 長期投資配置決策
    - 評估資產是否處於歷史極端區間
    - 風險管理與倉位調整
    - 多資產比較分析

    ## 黃金專用功能

    針對黃金，可使用 `--include-macro` 參數進行：
    - 1970s-like vs 2000s-like 行情體質判定
    - 基於實質利率、通膨、地緣風險、美元的多因子分析

    參考範例：`examples/gold-deviation-2026.json`
