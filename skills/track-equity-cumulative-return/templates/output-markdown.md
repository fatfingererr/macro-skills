# Markdown 報告模板

本文檔定義累積報酬率分析的 Markdown 報告格式。

---

## 1. 多標的比較報告

**注意**：起始日期為前一年最後一個交易日（基準日），例如分析 2022 年起，start_date 為 2021-12-31。

```markdown
# 累積報酬率分析報告

**分析日期**: 2026-01-28
**分析期間**: 2021-12-31 ~ 2026-01-28 (4.08 年)
**基準日**: 2021-12-31 (2021 年最後交易日)
**基準指數**: S&P 500

---

## 績效排名

| 排名 | 代碼  | 名稱           | 累積報酬率 | vs 基準    |
|------|-------|----------------|------------|------------|
| 1    | NVDA  | NVIDIA (NVDA)  | +320.50%   | +275.30% ✓ |
| 2    | AMD   | AMD (AMD)      | +180.20%   | +135.00% ✓ |
| 3    | GOOGL | Google (GOOGL) | +65.30%    | +20.10% ✓  |
| 基準 | ^GSPC | S&P 500        | +45.20%    | -          |

---

## 統計摘要

- **最佳表現**: NVDA (+320.50%)
- **打敗基準**: 3 / 3 支 (100%)
- **平均報酬**: +188.67%

---

## 視覺化圖表

![累積報酬率比較](output/cumulative_return_2026-01-28.png)

---

## 資料來源

- 價格數據: Yahoo Finance
- 截至日期: 2026-01-28
```

---

## 2. 指數 Top N 報告

**注意**：起始日期為前一年最後一個交易日（基準日），例如分析 2022 年起，start_date 為 2021-12-31。

```markdown
# Nasdaq 100 成分股績效分析

**分析日期**: 2026-01-28
**分析期間**: 2021-12-31 ~ 2026-01-28 (4.08 年)
**基準日**: 2021-12-31 (2021 年最後交易日)
**基準指數**: S&P 500

---

## Top N 績效排名

| 排名 | 代碼 | 名稱   | 累積報酬率 | vs 基準  |
|------|------|--------|------------|----------|
| 1    | NVDA | NVIDIA | +320.50%   | +275.30% |
| 2    | META | Meta   | +250.20%   | +205.00% |
| 3    | AMD  | AMD    | +180.20%   | +135.00% |
| ...  | ...  | ...    | ...        | ...      |
| 20   | AAPL | Apple  | +65.30%    | +20.10%  |

---

## 統計摘要

| 指標           | 數值       |
|----------------|------------|
| 分析股票數     | 98 / 100   |
| 打敗基準數     | 45 (45.9%) |
| Top N 平均報酬 | +145.60%   |
| 全體平均報酬   | +52.30%    |

---

## 關鍵發現

1. **龍頭效應明顯**: NVDA 單獨貢獻大部分指數漲幅
2. **AI 概念領跑**: 前五名有三支為 AI 相關股票
3. **分化加劇**: Top N 報酬率是全體平均的 2.8 倍

---

## 視覺化圖表

![Nasdaq 100 Top N](output/nasdaq100_top20_2026-01-28.png)

---

## 風險提示

- 成分股列表為當前組成，存在倖存者偏差
- 報酬率為價格報酬，未計入股息
- 過去績效不代表未來表現

---

## 資料來源

- 價格數據: Yahoo Finance
- 截至日期: 2026-01-28
```

---

## 3. 模板使用方式

### 替換變數

| 變數               | 說明         |
|--------------------|--------------|
| `{as_of}`          | 分析日期     |
| `{start_date}`     | 起始日期     |
| `{end_date}`       | 結束日期     |
| `{years_held}`     | 持有年數     |
| `{benchmark_name}` | 基準名稱     |
| `{best_performer}` | 最佳表現者   |
| `{best_return}`    | 最佳報酬率   |
| `{beat_count}`     | 打敗基準數量 |
| `{total_count}`    | 總標的數量   |
| `{chart_path}`     | 圖表路徑     |

### 生成方式

可透過 Python 腳本讀取 JSON 輸出並套用模板：

```python
import json

with open('result.json', 'r') as f:
    data = json.load(f)

report = f"""
# 累積報酬率分析報告

**分析日期**: {data['as_of']}
**分析期間**: {data['period']['start_date']} ~ {data['period']['end_date']}

...
"""
```
